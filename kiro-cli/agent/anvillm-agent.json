{
  "name": "anvillm-agent",
  "description": "Agent for AnviLLM multi-agent workflows with mailbox communication",
  "tools": [
    "*",
    "@anvilmcp/read_inbox",
    "@anvilmcp/send_message",
    "@anvilmcp/list_sessions",
    "@anvilmcp/set_state"
  ],
  "allowedTools": ["*"],
  "hooks": {
    "agentSpawn": [
      {
        "command": "cat ~/.kiro/SKILLS_PROMPT.md"
      }
    ],
    "userPromptSubmit": [
      {
        "command": "KIRO_PID=$(ps -o ppid= -p $PPID | tr -d ' '); cat $(namespace)/anvillm-session-id-$KIRO_PID 2>/dev/null | xargs -I{} sh -c 'echo running | 9p write agent/{}/state 2>/dev/null' || true"
      }
    ],
    "stop": [
      {
        "command": "KIRO_PID=$(ps -o ppid= -p $PPID | tr -d ' '); cat $(namespace)/anvillm-session-id-$KIRO_PID 2>/dev/null | xargs -I{} sh -c 'echo idle | 9p write agent/{}/state 2>/dev/null' || true"
      }
    ]
  }
}
